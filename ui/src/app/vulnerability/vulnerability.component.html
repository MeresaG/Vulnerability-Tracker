<div class="row">
    <div class="col s12 m8">
        <h3>{{vulnerability.vulnerabilityType}}
        </h3>
        <div class="card story">
            <div class="card-content">
                <span class="card-title">Opened at {{vulnerability.createdAt | date :'MMM d, y, h:mm:ss a'}}</span>
                {{vulnerability.description}}
                <h6 style="color: blue;"> Status : {{vulnerability.status}}</h6>
                <h6 style="color: red;">Severity: {{vulnerability.severity}}</h6>
            </div>
        </div>
    </div>

    <div class="col s12 m4">
        <div class="card center-align">
            <div class="card-content">
                <app-comment [vulId]=vulnerability._id></app-comment>
            </div>
        </div>
    </div>

    
</div>

<div class="row">
    <div class="col s12 m12">
        <div class="card center-align">
            <div class="card-content">
                <span class="card-title">
                    <h6 style="color: blue;"> Comments</h6>
                </span>
                <div class="input-field">
                    <input type="text" id="search" name="search" [(ngModel)]="searchTerm">
                    <label for="search">Search</label>
                </div>
            </div>
            <div class="card-action">
                <table class="striped" *ngIf = "vulnerability.comment; else elseBlock">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>comment</th>
                            <th></th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                            <tr *ngFor = "let comment of vulnerability.comment | filter: searchTerm">
                                <td><a routerLink="/vulnerabilities/{{vulnerability._id}}/comments/{{comment._id}}"><span class="dash-status">{{comment.title}}</span></a></td>
                                <td>{{comment.comment}}</td>
                               
                                <td>
                                    <a routerLink="/edit/{{vulnerability._id}}/comments/{{comment._id}}" class="btn btn-float">
                                        <i class="fas fa-edit"></i>
                                    </a>                           
                                </td>
                                <td>
                                    <button type = "submit" class="btn red" (click) = "onDelete(vulnerability._id, comment._id)">
                                        <i class="fas fa-trash">  
                                        </i>
                                    </button>
                                </td>
            
                            </tr>
                    </tbody>
                </table>
                <ng-template #elseBlock>
                    <p >You have not created any comments</p>
                </ng-template>
            </div>
        </div>
    </div>
    
</div>