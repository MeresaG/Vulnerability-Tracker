const mongoose = require('mongoose');
const Person = mongoose.model(process.env.PERSON_MODEL);

const getPerson = function() {
    console.log("Get Person Controller called");
    
    const response = {
        status : 200,
        message : {}
    }

    const personId= req.params.gameId;

    if(mongoose.isValidObjectId(personId)) {
        console.log("Valid user Id");
        Person.findById(personId).exec(function(err, person) {
            if(err) {
                console.log("Error reading game");
                response.status = 500;
                response.message = {"message" : err};    
            }
            if(person) {
                console.log("Found Game");
                response.status = 200;
                response.message = person; 
            }
            else {
                console.log("game is null");
                response.status = 404;
                response.message = {"message" : "Game with given Id not found"}
            }
            return response.status(response.status).json(response.message);
            });

    }
    else {
        response.status = process.env.HTTP_STATUS_NOTFOUND;
        response.message = {"message" : "Invalid user Id"}
        return response.status(response.status).json(response.message);
    }

}

module.exports = {
    getPerson : getPerson
}